{% extends "base.html" %}
{% block title %}âœ… ContraseÃ±a actualizada{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/password_reset_complete.css' %}">

{% endblock %}

{% block content %}
<div class="success-bg">


    <div class="success-card">
        <!-- Icono animado -->
        <div class="success-icon">ðŸŽ‰</div>
        
        <!-- TÃ­tulo y mensaje -->
        <h1 class="success-title">Â¡ContraseÃ±a Actualizada!</h1>
        <p class="success-subtitle">
            Tu contraseÃ±a ha sido restablecida exitosamente.<br>
            Ahora puedes iniciar sesiÃ³n con tu nueva contraseÃ±a.
        </p>

        <!-- BotÃ³n de acciÃ³n -->
        <a href="{% url 'login' %}" class="success-btn">
            <span class="btn-icon">ðŸ”‘</span>
            Iniciar SesiÃ³n
        </a>

        <!-- Progress bar para redirecciÃ³n automÃ¡tica -->
        <div class="redirect-progress">
            <div class="progress-text">Redirigiendo automÃ¡ticamente en <span id="countdown">8</span> segundos...</div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    // Contador para redirecciÃ³n automÃ¡tica
    let countdown = 8;
    const countdownElement = document.getElementById('countdown');
    const progressFill = document.querySelector('.progress-fill');
    
    const countdownInterval = setInterval(() => {
        countdown--;
        countdownElement.textContent = countdown;
        
        if (countdown <= 0) {
            clearInterval(countdownInterval);
            window.location.href = "{% url 'login' %}";
        }
    }, 1000);

    // Opcional: RedirecciÃ³n inmediata al hacer clic en cualquier parte
    document.addEventListener('click', () => {
        clearInterval(countdownInterval);
        window.location.href = "{% url 'login' %}";
    });

    // Efecto de partÃ­culas adicional al cargar
    setTimeout(() => {
        createParticles();
    }, 1000);
});

function createParticles() {

    
    for (let i = 0; i < 15; i++) {
        const particle = document.createElement('div');
        particle.style.cssText = `
            position: absolute;
            width: 8px;
            height: 8px;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            border-radius: 50%;
            top: 50%;
            left: 50%;
            pointer-events: none;
            animation: particleExplode 1.5s ease-out forwards;
        `;
        
        const angle = Math.random() * Math.PI * 2;
        const distance = 100 + Math.random() * 200;
        const translateX = Math.cos(angle) * distance;
        const translateY = Math.sin(angle) * distance;
        
        particle.style.setProperty('--translateX', `${translateX}px`);
        particle.style.setProperty('--translateY', `${translateY}px`);
        
        container.appendChild(particle);
        
        setTimeout(() => {
            particle.remove();
        }, 1500);
    }
}

// AÃ±adir keyframes dinÃ¡micamente para las partÃ­culas
const style = document.createElement('style');
style.textContent = `
    @keyframes particleExplode {
        0% {
            transform: translate(0, 0) scale(1);
            opacity: 1;
        }
        100% {
            transform: translate(var(--translateX), var(--translateY)) scale(0);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}